# Тест-кейсы для веб-сервиса "Путешествие дня"

## UI-тесты

| ID    | Название                                     | Шаги                                                                                                            | Ожидаемый результат                                                        |
|-------|----------------------------------------------|-----------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------| 
| UI-01 | Успешная покупка по карте                    | 1. Открыть страницу<br>2. Нажать "Купить"<br>3. Ввести данные валидной карты<br>4. Нажать "Продолжить"          | Появляется уведомление "Операция одобрена Банком"                          |
| UI-02 | Отклонение покупки по недействительной карте | 1. Открыть страницу<br>2. Нажать "Купить"<br>3. Ввести данные отклонённой карты<br>4. Нажать "Продолжить"       | Появляется уведомление "Ошибка! Банк отказал в проведении операции"        |
| UI-03 | Ошибка при вводе прошедшего года             | 1. Открыть страницу<br>2. Нажать "Купить"<br>3. Ввести год 24<br>4. Нажать "Продолжить"                         | Поле "Год" подсвечивается с ошибкой "Истёк срок действия карты"            |
| UI-04 | Ошибка при вводе недействительного месяца    | 1. Открыть страницу<br>2. Нажать "Купить"<br>3. Ввести месяц 13<br>4. Нажать "Продолжить"                       | Поле "Месяц" подсвечивается с ошибкой "Неверно указан срок действия карты" |
| UI-05 | Ошибки при всех незаполненных полях          | 1. Открыть страницу<br>2. Нажать "Купить"<br>3. Нажать "Продолжить" без заполнения полей                        | Все поля подсвечиваются с ошибками                                         |
| UI-06 | Покупка в кредит с одобренной картой         | 1. Открыть страницу<br>2. Нажать "Купить в кредит"<br>3. Ввести данные валидной карты<br>4. Нажать "Продолжить" | Появляется уведомление "Операция одобрена Банком"                          |

## API-тесты

| ID     | Название                                       | Шаги                                         | Ожидаемый результат                                         |
|--------|------------------------------------------------|----------------------------------------------|-------------------------------------------------------------|   
| API-01 | Оплата тура - одобренная карта                 | POST `/api/v1/pay` с `number=4444...4441`    | 200 OK, `status=APPROVED`, запись в `payment_entity`        |
| API-02 | Оплата тура - отклонённая карта                | POST `/api/v1/pay` с `number=4444...4442`    | 200 OK, `status=DECLINED`, запись в `payment_entity`        |
| API-03 | Кредит - одобренная карта                      | POST `/api/v1/credit` с `number=4444...4441` | 200 OK, `status=APPROVED`, запись в `credit_request_entity` |
| API-04 | Кредит - отклонённая карта                     | POST `/api/v1/credit` с `number=4444...4442` | 200 OK, `status=DECLINED`, запись в `credit_request_entity` |
| API-05 | Оплата - пустое тело запроса                   | POST `/api/v1/pay` с `{}`                    | 400 Bad Request                                             |
| API-06 | Ошибка при передаче некорректного номера карты | POST `/api/v1/credit` с `number=0000...0000` | 400 Bad Request                                             |

## Проверки БД

| ID    | Название                                             | Шаги                                                          | Ожидаемый результат            |
|-------|------------------------------------------------------|---------------------------------------------------------------|--------------------------------| 
| DB-01 | Проверка записи успешной оплаты                      | После успешной оплаты - запрос к `payment_entity`             | Запись с `status=APPROVED`     | 
| DB-02 | Проверка записи неудачной оплаты                     | После отклонённой оплаты - запрос к `payment_entity`          | Запись с `status=DECLINED`     |
| DB-03 | Проверка записи успешного кредита                    | После успешного кредита - запрос к `credit_request_entity`    | Запись с `status=APPROVED`     |
| DB-04 | Проверка записи неудачного кредита                   | После отклонённого кредита - запрос к `credit_request_entity` | Запись с `status=DECLINED`     |
| DB-05 | Проверка связи payment_entity и order_entity         | После оплаты - сравнить `transaction_id` и `payment_id`       | Значения совпадают             |
| DB-06 | Проверка связи credit_request_entity и order_entity  | После кредита - сравнить `id` и `credit_id`                   | Значения совпадают             |