# Отчёт о проведённом тестировании

## Краткое описание

Было проведено комплексное автоматизированное тестирование веб-сервиса, предназначенного для покупки туров двумя способами: оплата дебетовой картой и оформление кредита. 
Тестирование охватывало UI- и API-уровни, а также проверку корректности сохранения данных в двух поддерживаемых СУБД (PostgreSQL и MySQL). 
Использовались фреймворки Selenide и RestAssured, отчётность генерировалась через Allure. 
В ходе тестирования были выявлены критичные баги, связанные с некорректным отображением сообщений и нарушением целостности данных в базе.

## Количество тест-кейсов

Всего было разработано и выполнено **12 тест-кейсов**:
- **6 UI-тестов**
- **6 API-тестов** (включая 2 проверки связности таблиц в БД)

## Результаты тестирования

| Категория                     | Количество | Статус       |
|-------------------------------|------------|--------------|
| Успешные тесты                | 10         |    Passed    |
| Проваленные тесты             | 2          |    Failed    |
| **Итого**                     | **12**     |              |

- **Процент успешных тестов:** 83.3%  
- **Процент неуспешных тестов:** 16.7%

### Неуспешные тесты и причины
1. `UiTests.shouldDeclineTourWithDeclinedCard` - отображается «Операция одобрена Банком» вместо «Ошибка! Банк отказал...» (**UI-баг**).
2. `ApiTest.checkTableConnectivityForCredit` - в таблице `order_entity` поле `credit_id` остаётся `null` (**баг целостности данных**).

Оба падения подтверждены и зафиксированы в issue:  
- [#1](https://github.com/vzelenkova/aqa-diploma-final/issues/1)  
- [#2](https://github.com/vzelenkova/aqa-diploma-final/issues/2)

## Общие рекомендации

1. **Срочно исправить баги**, связанные с обработкой отклонённых карт и сохранением кредитных заявок - они нарушают базовую бизнес-логику.
2. Усилить проверку связности данных между сущностями (`order_entity`, `payment_entity`, `credit_request_entity`) на уровне backend-валидации.
3. Рассмотреть возможность добавления проверки статуса заказа в UI (например, через API после закрытия модального окна), чтобы избежать зависимости только от текста уведомления.
4. Добавить валидацию на стороне фронтенда для CVC/CVV (должен быть 3 цифры, не `000`), так как сейчас поле пропускает некорректные значения без предупреждения.

> **Вывод:** Текущая версия приложения **непригодна для продакшена** из-за критичных багов в обработке финансовых операций. Автоматизированные тесты успешно выполнили свою роль - выявили скрытые дефекты на раннем этапе.
