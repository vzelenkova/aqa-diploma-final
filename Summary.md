# Отчёт о проведённой автоматизации

## Что было запланировано и что реализовано

| Пункт плана                                         | Статус     | Комментарий                                                                       |
|-----------------------------------------------------|------------|-----------------------------------------------------------------------------------|
| UI-тесты: 6 сценариев (валидация + позитив/негатив) | Выполнено  | Все сценарии реализованы, включая генерацию скриншотов в Allure                   |
| API-тесты: 6 сценариев (включая проверки БД)        | Выполнено  | Проверены статусы, коды ответов, связность таблиц                                 |
| Поддержка двух СУБД (PostgreSQL и MySQL)            | Выполнено  | Переключение через `DB_TYPE`, отдельные скрипты инициализации                     |
| Интеграция с Docker Compose                         | Выполнено  | Единый `docker-compose.yml`, корректные зависимости                               |
| Отчётность через Allure                             | Выполнено  | Генерация и просмотр отчётов через Gradle (`allureReport`, `allureServe`)         |
| Проверка связности таблиц `payment_entity`          | Выполнено  | Тест проходит успешно                                                             |
| Проверка связности таблиц `credit_request_entity`   | Выполнено  | Тест написан и запущен, выявил баг                                                |
| Интеграция с GitHub Actions / CI                    | Не сделано | Выходило за рамки обязательных требований (Expert Level)                          |

## Причины, по которым что-то не было реализовано

- **Интеграция с CI/CD (GitHub Actions)**:  
  Хотя задача была в плане как «Expert Level», в требованиях явно указано: *«выполнение или не выполнение этого раздела не влияет на получение диплома»*. Было принято решение сосредоточиться на качестве core-автоматизации и глубоком тестировании, а не на дополнительных инфраструктурных компонентах.

## Сработавшие риски

1. **Непредвиденные баги в SUT**:  
     **Сработал** - приложение содержит критичные баги, которые привели к падению 2 из 12 тестов.  
     **Митигация сработала**: тесты были написаны так, чтобы фиксировать расхождения с ожиданием. Баги зафиксированы в issue.

2. **Зависимость от времени (валидация года)**:  
     **Сработал частично** - изначально использовалась «жёсткая» дата (`24`), что приводило к нестабильности.  
     **Митигация**: заменили на генерацию года через `Faker` (`current + 1..5`), теперь тесты стабильны.

3. **Проблемы с Docker** (конфликты портов, инициализация БД):  
    **Сработал** - при первом запуске возникали ошибки подключения к БД из-за неготовности контейнера.  
    **Митигация**: добавлены инструкции по очистке `mysql_data/`, `pg_data/` и использованию `sudo`; в коде повторные попытки в `DbUtils.clearTables()`.

## Общий итог по времени

| Этап                | Планируемое время | Фактическое время | Комментарий                                                                                   |
|---------------------|-------------------|-------------------| ----------------------------------------------------------------------------------------------|
| Планирование        | 3 дня             | 4 дня             | Дополнительное время ушло на отладку Docker                                                   |
| Написание тестов    | 7 дней            | 8 дней            | Интеграция Selenide + Allure заняла немного больше времени                                    |
| Отладка и доработка | 3 дня             | 4 дня             | отладка подключения к разным СУБД и выявление багов потребовали глубокого анализа логов и SQL |
| Подготовка отчётов  | 2 дня             | 2 дня             | -                                                                                             |
| **ИТОГО**           | **15 дней**       | **18 дней**       | **Расхождение: +3 дня**                                                                       |

### Обоснование расхождения
Превышение на **3 дня** объясняется:
- Необходимостью глубокого исследования причин падения тестов (особенно бага с `credit_id = null` - потребовалось изучение логов SUT и эмулятора).
- Дополнительной проверкой на обеих СУБД для подтверждения, что баги не зависят от типа БД.

> **Вывод**: Автоматизация выполнена в полном объёме согласно базовым требованиям. План соблюдён с небольшим превышением, вызванным выявлением и анализом критичных дефектов, что является **целью** тестирования.
